<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="google-site-verification" content="tv4zZJHw9b0wJ26G5-2gC5KAXPCcpW3-VCjB8bqx3cY" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HEIC to JPG Converter - Free Online Tool</title>
    <meta name="description" content="Convert HEIC files to JPG format instantly. 100% free, secure, and works entirely in your browser. No upload required.">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/heic2any@0.0.4/dist/heic2any.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0F4C81',
                        secondary: '#1E6BB8',
                        accent: '#3B9AE1',
                        dark: '#0A2540',
                        light: '#E8F4FD'
                    },
                    fontFamily: {
                        sans: ['Plus Jakarta Sans', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        .drop-zone {
            background: linear-gradient(135deg, #E8F4FD 0%, #ffffff 100%);
            border: 3px dashed #3B9AE1;
            transition: all 0.3s ease;
        }
        .drop-zone:hover, .drop-zone.dragover {
            border-color: #0F4C81;
            background: linear-gradient(135deg, #d0e8f7 0%, #E8F4FD 100%);
            transform: scale(1.01);
        }
        .progress-bar {
            background: linear-gradient(90deg, #0F4C81, #3B9AE1);
            transition: width 0.3s ease;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
        }
        .accordion-content.open {
            max-height: 500px;
        }
        .file-card {
            animation: slideIn 0.3s ease;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .btn-primary {
            background: linear-gradient(135deg, #0F4C81 0%, #1E6BB8 100%);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #1E6BB8 0%, #3B9AE1 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(15, 76, 129, 0.3);
        }
        .quality-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #0F4C81, #3B9AE1);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(15, 76, 129, 0.3);
        }
        .quality-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #0F4C81, #3B9AE1);
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }
    </style>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2424761903136639"
     crossorigin="anonymous"></script>
</head>
<body class="bg-gradient-to-br from-slate-50 to-light min-h-screen font-sans">
    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-gradient-to-br from-primary to-accent rounded-xl flex items-center justify-center">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                    </svg>
                </div>
                <h1 class="text-xl md:text-2xl font-bold text-dark">HEIC<span class="text-accent">2</span>JPG</h1>
            </div>
            <div class="relative">
                <select id="langSelect" class="appearance-none bg-light border-2 border-accent/30 rounded-xl px-4 py-2 pr-10 text-dark font-medium cursor-pointer hover:border-accent transition-colors focus:outline-none focus:border-primary">
                    <option value="en">游섫릖 English</option>
                    <option value="tr">游좷릖 T칲rk칞e</option>
                    <option value="de">游뾇릖 Deutsch</option>
                    <option value="es">游쀯릖 Espa침ol</option>
                </select>
                <svg class="w-5 h-5 absolute right-3 top-1/2 -translate-y-1/2 text-primary pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </div>
        </div>
    </header>

    <!-- Ad Space 1 -->
    <div class="max-w-6xl mx-auto px-4 mt-6">
        <div class="bg-gradient-to-r from-slate-200 to-slate-300 rounded-2xl h-24 flex items-center justify-center text-slate-500 font-medium">
            <span data-i18n="adSpace">Advertisement Space</span>
        </div>
    </div>

    <!-- Main Tool Section -->
    <main class="max-w-4xl mx-auto px-4 py-10">
        <div class="text-center mb-8">
            <h2 class="text-3xl md:text-4xl font-extrabold text-dark mb-3" data-i18n="mainTitle">Convert HEIC to JPG</h2>
            <p class="text-slate-600 text-lg" data-i18n="mainSubtitle">Fast, free, and secure conversion directly in your browser</p>
        </div>

        <!-- Drop Zone -->
        <div id="dropZone" class="drop-zone rounded-3xl p-10 md:p-16 text-center cursor-pointer mb-6">
            <div class="flex flex-col items-center gap-4">
                <div class="w-20 h-20 bg-gradient-to-br from-primary to-accent rounded-2xl flex items-center justify-center shadow-lg">
                    <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                    </svg>
                </div>
                <div>
                    <p class="text-xl font-bold text-dark mb-2" data-i18n="dropTitle">Drag & Drop HEIC Files Here</p>
                    <p class="text-slate-500" data-i18n="dropSubtitle">or click to browse files</p>
                </div>
                <button class="btn-primary text-white font-semibold px-8 py-3 rounded-xl mt-2" data-i18n="selectFiles">Select Files</button>
            </div>
            <input type="file" id="fileInput" multiple accept=".heic,.HEIC" class="hidden">
        </div>

        <!-- Quality Slider -->
        <div class="bg-white rounded-2xl p-6 shadow-lg mb-6">
            <div class="flex items-center justify-between mb-3">
                <label class="font-semibold text-dark" data-i18n="qualityLabel">Output Quality</label>
                <span id="qualityValue" class="bg-light text-primary font-bold px-4 py-1 rounded-lg">80%</span>
            </div>
            <input type="range" id="qualitySlider" min="10" max="100" value="80" class="quality-slider w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer">
            <div class="flex justify-between text-sm text-slate-500 mt-2">
                <span data-i18n="qualityLow">Low (smaller file)</span>
                <span data-i18n="qualityHigh">High (better quality)</span>
            </div>
        </div>

        <!-- Security Badge -->
        <div class="flex items-center justify-center gap-3 bg-green-50 border-2 border-green-200 rounded-xl p-4 mb-8">
            <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                </svg>
            </div>
            <p class="text-green-800 font-medium" data-i18n="securityBadge">Your files never leave your device - 100% Secure & Private</p>
        </div>

        <!-- File List -->
        <div id="fileList" class="space-y-3 mb-6"></div>

        <!-- Download All Button -->
        <div id="downloadAllContainer" class="hidden">
            <button id="downloadAllBtn" class="w-full btn-primary text-white font-bold py-4 rounded-2xl flex items-center justify-center gap-3 text-lg">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                </svg>
                <span data-i18n="downloadAllZip">Download All as ZIP</span>
            </button>
        </div>
    </main>

    <!-- Ad Space 2 -->
    <div class="max-w-6xl mx-auto px-4 mb-10">
        <div class="bg-gradient-to-r from-slate-200 to-slate-300 rounded-2xl h-24 flex items-center justify-center text-slate-500 font-medium">
            <span data-i18n="adSpace">Advertisement Space</span>
        </div>
    </div>

    <!-- FAQ Section -->
    <section class="bg-white py-16">
        <div class="max-w-4xl mx-auto px-4">
            <h2 class="text-3xl font-extrabold text-dark text-center mb-10" data-i18n="faqTitle">Frequently Asked Questions</h2>
            <div class="space-y-4" id="faqContainer">
                <!-- FAQ items will be populated by JS -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-8">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <p class="text-slate-400" data-i18n="footerText">춸 2026 HEIC2JPG - Free Online HEIC to JPG Converter</p>
        </div>
    </footer>

    <script>
        // Translations
        const translations = {
            en: {
                mainTitle: "Convert HEIC to JPG",
                mainSubtitle: "Fast, free, and secure conversion directly in your browser",
                dropTitle: "Drag & Drop HEIC Files Here",
                dropSubtitle: "or click to browse files",
                selectFiles: "Select Files",
                qualityLabel: "Output Quality",
                qualityLow: "Low (smaller file)",
                qualityHigh: "High (better quality)",
                securityBadge: "Your files never leave your device - 100% Secure & Private",
                downloadAllZip: "Download All as ZIP",
                adSpace: "Advertisement Space",
                faqTitle: "Frequently Asked Questions",
                footerText: "춸 2026 HEIC2JPG - Free Online HEIC to JPG Converter",
                converting: "Converting...",
                completed: "Completed",
                download: "Download",
                error: "Error",
                faq: [
                    { q: "What is HEIC format?", a: "HEIC (High Efficiency Image Container) is a modern image format developed by Apple. It offers better compression than JPEG while maintaining higher image quality, which means smaller file sizes with the same visual quality." },
                    { q: "Why should I convert HEIC to JPG?", a: "While HEIC offers great compression, JPG is universally supported across all devices, browsers, and applications. Converting to JPG ensures your images can be viewed and shared anywhere without compatibility issues." },
                    { q: "Is my data safe with this converter?", a: "Absolutely! Our converter works entirely in your browser. Your files are never uploaded to any server - all processing happens locally on your device, ensuring complete privacy and security." },
                    { q: "Is there a limit on file size or number of files?", a: "There's no strict limit, but processing very large files or many files at once depends on your device's capabilities. We recommend converting in batches of 20-30 files for optimal performance." }
                ]
            },
            tr: {
                mainTitle: "HEIC'i JPG'ye D칬n칲릆칲r",
                mainSubtitle: "Taray캼c캼n캼zda h캼zl캼, 칲cretsiz ve g칲venli d칬n칲릆칲rme",
                dropTitle: "HEIC Dosyalar캼n캼 Buraya S칲r칲kleyin",
                dropSubtitle: "veya dosya se칞mek i칞in t캼klay캼n",
                selectFiles: "Dosya Se칞",
                qualityLabel: "칂캼kt캼 Kalitesi",
                qualityLow: "D칲칲k (k칲칞칲k dosya)",
                qualityHigh: "Y칲ksek (daha iyi kalite)",
                securityBadge: "Dosyalar캼n캼z cihaz캼n캼zdan d캼르r캼 칞캼kmaz - %100 G칲venli ve Gizli",
                downloadAllZip: "Hepsini ZIP Olarak 캻ndir",
                adSpace: "Reklam Alan캼",
                faqTitle: "S캼k칞a Sorulan Sorular",
                footerText: "춸 2026 HEIC2JPG - 칖cretsiz Online HEIC'ten JPG'ye D칬n칲릆칲r칲c칲",
                converting: "D칬n칲릆칲r칲l칲yor...",
                completed: "Tamamland캼",
                download: "캻ndir",
                error: "Hata",
                faq: [
                    { q: "HEIC format캼 nedir?", a: "HEIC (High Efficiency Image Container), Apple taraf캼ndan geli릆irilen modern bir g칬r칲nt칲 format캼d캼r. JPEG'den daha iyi s캼k캼릆캼rma sunarken daha y칲ksek g칬r칲nt칲 kalitesi sa륿ar, bu da ayn캼 g칬rsel kalitede daha k칲칞칲k dosya boyutlar캼 anlam캼na gelir." },
                    { q: "Neden HEIC'i JPG'ye d칬n칲릆칲rmeliyim?", a: "HEIC harika s캼k캼릆캼rma sunsa da, JPG t칲m cihazlarda, taray캼c캼larda ve uygulamalarda evrensel olarak desteklenir. JPG'ye d칬n칲릆칲rmek, g칬rsellerinizin uyumluluk sorunlar캼 olmadan her yerde g칬r칲nt칲lenebilmesini ve payla캼labilmesini sa륿ar." },
                    { q: "Verilerim bu d칬n칲릆칲r칲c칲de g칲vende mi?", a: "Kesinlikle! D칬n칲릆칲r칲c칲m칲z tamamen taray캼c캼n캼zda 칞al캼캼r. Dosyalar캼n캼z hi칞bir sunucuya y칲klenmez - t칲m i륿emler cihaz캼n캼zda yerel olarak ger칞ekle를r, b칬ylece tam gizlilik ve g칲venlik sa륿an캼r." },
                    { q: "Dosya boyutu veya dosya say캼s캼 s캼n캼r캼 var m캼?", a: "Kesin bir s캼n캼r yoktur, ancak 칞ok b칲y칲k dosyalar캼 veya ayn캼 anda bir칞ok dosyay캼 i륿emek cihaz캼n캼z캼n kapasitesine ba륿캼d캼r. Optimum performans i칞in 20-30 dosyal캼k gruplar halinde d칬n칲릆칲rmenizi 칬neririz." }
                ]
            },
            de: {
                mainTitle: "HEIC in JPG umwandeln",
                mainSubtitle: "Schnelle, kostenlose und sichere Konvertierung direkt im Browser",
                dropTitle: "HEIC-Dateien hier ablegen",
                dropSubtitle: "oder klicken, um Dateien auszuw칛hlen",
                selectFiles: "Dateien ausw칛hlen",
                qualityLabel: "Ausgabequalit칛t",
                qualityLow: "Niedrig (kleinere Datei)",
                qualityHigh: "Hoch (bessere Qualit칛t)",
                securityBadge: "Ihre Dateien verlassen nie Ihr Ger칛t - 100% sicher & privat",
                downloadAllZip: "Alle als ZIP herunterladen",
                adSpace: "Werbefl칛che",
                faqTitle: "H칛ufig gestellte Fragen",
                footerText: "춸 2026 HEIC2JPG - Kostenloser Online HEIC zu JPG Konverter",
                converting: "Konvertierung...",
                completed: "Abgeschlossen",
                download: "Herunterladen",
                error: "Fehler",
                faq: [
                    { q: "Was ist das HEIC-Format?", a: "HEIC (High Efficiency Image Container) ist ein modernes Bildformat, das von Apple entwickelt wurde. Es bietet bessere Komprimierung als JPEG bei h칬herer Bildqualit칛t, was kleinere Dateigr칬른n bei gleicher visueller Qualit칛t bedeutet." },
                    { q: "Warum sollte ich HEIC in JPG umwandeln?", a: "Obwohl HEIC gro르rtige Komprimierung bietet, wird JPG universell auf allen Ger칛ten, Browsern und Anwendungen unterst칲tzt. Die Konvertierung in JPG stellt sicher, dass Ihre Bilder 칲berall ohne Kompatibilit칛tsprobleme angezeigt und geteilt werden k칬nnen." },
                    { q: "Sind meine Daten bei diesem Konverter sicher?", a: "Absolut! Unser Konverter arbeitet vollst칛ndig in Ihrem Browser. Ihre Dateien werden nie auf einen Server hochgeladen - alle Verarbeitung erfolgt lokal auf Ihrem Ger칛t, was vollst칛ndige Privatsph칛re und Sicherheit gew칛hrleistet." },
                    { q: "Gibt es ein Limit f칲r Dateigr칬른 oder Anzahl der Dateien?", a: "Es gibt kein striktes Limit, aber die Verarbeitung sehr gro른r Dateien oder vieler Dateien gleichzeitig h칛ngt von den F칛higkeiten Ihres Ger칛ts ab. Wir empfehlen die Konvertierung in Stapeln von 20-30 Dateien f칲r optimale Leistung." }
                ]
            },
            es: {
                mainTitle: "Convertir HEIC a JPG",
                mainSubtitle: "Conversi칩n r치pida, gratuita y segura directamente en tu navegador",
                dropTitle: "Arrastra y suelta archivos HEIC aqu칤",
                dropSubtitle: "o haz clic para seleccionar archivos",
                selectFiles: "Seleccionar archivos",
                qualityLabel: "Calidad de salida",
                qualityLow: "Baja (archivo m치s peque침o)",
                qualityHigh: "Alta (mejor calidad)",
                securityBadge: "Tus archivos nunca salen de tu dispositivo - 100% Seguro y Privado",
                downloadAllZip: "Descargar todo como ZIP",
                adSpace: "Espacio publicitario",
                faqTitle: "Preguntas frecuentes",
                footerText: "춸 2026 HEIC2JPG - Convertidor gratuito de HEIC a JPG en l칤nea",
                converting: "Convirtiendo...",
                completed: "Completado",
                download: "Descargar",
                error: "Error",
                faq: [
                    { q: "쯈u칠 es el formato HEIC?", a: "HEIC (High Efficiency Image Container) es un formato de imagen moderno desarrollado por Apple. Ofrece mejor compresi칩n que JPEG manteniendo mayor calidad de imagen, lo que significa archivos m치s peque침os con la misma calidad visual." },
                    { q: "쯇or qu칠 deber칤a convertir HEIC a JPG?", a: "Aunque HEIC ofrece gran compresi칩n, JPG es universalmente compatible en todos los dispositivos, navegadores y aplicaciones. Convertir a JPG asegura que tus im치genes puedan verse y compartirse en cualquier lugar sin problemas de compatibilidad." },
                    { q: "쮼st치n seguros mis datos con este convertidor?", a: "춰Absolutamente! Nuestro convertidor funciona completamente en tu navegador. Tus archivos nunca se suben a ning칰n servidor - todo el procesamiento ocurre localmente en tu dispositivo, garantizando total privacidad y seguridad." },
                    { q: "쮿ay un l칤mite en el tama침o o n칰mero de archivos?", a: "No hay un l칤mite estricto, pero procesar archivos muy grandes o muchos archivos a la vez depende de las capacidades de tu dispositivo. Recomendamos convertir en lotes de 20-30 archivos para un rendimiento 칩ptimo." }
                ]
            }
        };

        let currentLang = 'en';
        let convertedFiles = [];

        // DOM Elements
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');
        const fileList = document.getElementById('fileList');
        const qualitySlider = document.getElementById('qualitySlider');
        const qualityValue = document.getElementById('qualityValue');
        const downloadAllContainer = document.getElementById('downloadAllContainer');
        const downloadAllBtn = document.getElementById('downloadAllBtn');
        const langSelect = document.getElementById('langSelect');
        const faqContainer = document.getElementById('faqContainer');

        // Language switching
        function updateLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (t[key]) el.textContent = t[key];
            });

            // Update FAQ
            renderFAQ();
        }

        function renderFAQ() {
            const faqs = translations[currentLang].faq;
            faqContainer.innerHTML = faqs.map((faq, i) => `
                <div class="border-2 border-slate-200 rounded-2xl overflow-hidden">
                    <button class="faq-btn w-full px-6 py-5 text-left flex justify-between items-center hover:bg-light transition-colors" data-index="${i}">
                        <span class="font-semibold text-dark text-lg">${faq.q}</span>
                        <svg class="faq-icon w-6 h-6 text-primary transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </button>
                    <div class="accordion-content">
                        <p class="px-6 pb-5 text-slate-600 leading-relaxed">${faq.a}</p>
                    </div>
                </div>
            `).join('');

            // Re-attach event listeners
            document.querySelectorAll('.faq-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const content = btn.nextElementSibling;
                    const icon = btn.querySelector('.faq-icon');
                    content.classList.toggle('open');
                    icon.style.transform = content.classList.contains('open') ? 'rotate(180deg)' : '';
                });
            });
        }

        langSelect.addEventListener('change', (e) => updateLanguage(e.target.value));

        // Quality slider
        qualitySlider.addEventListener('input', (e) => {
            qualityValue.textContent = e.target.value + '%';
        });

        // Drag and drop
        dropZone.addEventListener('click', () => fileInput.click());
        
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('dragover');
        });

        dropZone.addEventListener('dragleave', () => {
            dropZone.classList.remove('dragover');
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('dragover');
            handleFiles(e.dataTransfer.files);
        });

        fileInput.addEventListener('change', (e) => {
            handleFiles(e.target.files);
        });

        // Handle files
        async function handleFiles(files) {
            const heicFiles = Array.from(files).filter(f => 
                f.name.toLowerCase().endsWith('.heic')
            );

            if (heicFiles.length === 0) return;

            for (const file of heicFiles) {
                await convertFile(file);
            }

            if (convertedFiles.length > 1) {
                downloadAllContainer.classList.remove('hidden');
            }
        }

        async function convertFile(file) {
            const t = translations[currentLang];
            const id = Date.now() + Math.random();
            const fileName = file.name.replace(/\.heic$/i, '.jpg');

            // Create file card
            const card = document.createElement('div');
            card.className = 'file-card bg-white rounded-2xl p-5 shadow-lg';
            card.id = `file-${id}`;
            card.innerHTML = `
                <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center gap-3">
                        <div class="w-12 h-12 bg-light rounded-xl flex items-center justify-center">
                            <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                        </div>
                        <div>
                            <p class="font-semibold text-dark">${fileName}</p>
                            <p class="text-sm text-slate-500 status">${t.converting}</p>
                        </div>
                    </div>
                    <div class="action-btn"></div>
                </div>
                <div class="progress-container">
                    <div class="h-2 bg-slate-200 rounded-full overflow-hidden">
                        <div class="progress-bar h-full rounded-full" style="width: 0%"></div>
                    </div>
                </div>
            `;
            fileList.appendChild(card);

            const progressBar = card.querySelector('.progress-bar');
            const status = card.querySelector('.status');
            const actionBtn = card.querySelector('.action-btn');

            try {
                // Simulate progress
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += Math.random() * 15;
                    if (progress > 90) progress = 90;
                    progressBar.style.width = progress + '%';
                }, 100);

                const quality = qualitySlider.value / 100;
                const blob = await heic2any({
                    blob: file,
                    toType: 'image/jpeg',
                    quality: quality
                });

                clearInterval(progressInterval);
                progressBar.style.width = '100%';

                const convertedBlob = Array.isArray(blob) ? blob[0] : blob;
                convertedFiles.push({ name: fileName, blob: convertedBlob });

                status.textContent = t.completed;
                status.classList.add('text-green-600');
                
                actionBtn.innerHTML = `
                    <button class="btn-primary text-white font-medium px-5 py-2 rounded-xl text-sm" onclick="downloadFile('${fileName}', ${convertedFiles.length - 1})">
                        ${t.download}
                    </button>
                `;

                card.querySelector('.progress-container').classList.add('hidden');

            } catch (error) {
                progressBar.style.width = '100%';
                progressBar.style.background = '#ef4444';
                status.textContent = t.error;
                status.classList.add('text-red-600');
                console.error(error);
            }
        }

        function downloadFile(name, index) {
            const file = convertedFiles[index];
            const url = URL.createObjectURL(file.blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = name;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Download all as ZIP
        downloadAllBtn.addEventListener('click', async () => {
            const zip = new JSZip();
            
            convertedFiles.forEach(file => {
                zip.file(file.name, file.blob);
            });

            const content = await zip.generateAsync({ type: 'blob' });
            const url = URL.createObjectURL(content);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'heic-converted-images.zip';
            a.click();
            URL.revokeObjectURL(url);
        });

        // Initialize
        updateLanguage('en');
    </script>
</body>
</html>
